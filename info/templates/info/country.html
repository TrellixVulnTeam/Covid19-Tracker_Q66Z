{% extends 'info/base.html' %}
{% load static %}



{% block title %}
<title>{{country.name}} | Covid19</title>
{% endblock title %}

{% block content %}



<div class="col-lg-3 col-md-6 col-sm-12 col-xs-12">
    <div class="panel card-view">
        <div class="panel-heading small-panel-heading relative">
            <div class="pull-left">
                <img style="float:left;" src="{{country.flag}}">
                <h6 style="margin:22px 0 0 12px;display:inline-block;font-size:30px; font-weight: 700;"
                    class="panel-title">
                    {{country.name}} </h6>


            </div>
            <div class="clearfix"></div>

            <div class="head-overlay"></div>

        </div>
        <div class="panel-wrapper collapse in">
            <div class="panel-body row pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xs-12 pt-0 pl-4 pr-0 data-wrap-left">
                                <p>Population: <span class="counter-anim">{{country.population}}</span> </p>
                                <p><span class="text-primary">Last Update: </span>{{country.last_update|date:"j F l , H:i"}}
                                </p>

                            </div>
                            <!-- <div class=" col-xs-6 text-center pl-0 pr-0 pt-0 data-wrap-right">


                                        </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default card-view pa-0">
        <div class="panel-wrapper collapse in">

            <div class="panel-body pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row ">

                            <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left ">
                                <span class="txt-dark block counter"><span
                                        class="counter-anim text-danger">{{country.total.confirmed}}</span></span>
                                <span class="weight-500 capitalize-font block font-13">Total Confirmed
                                    Cases</span>
                            </div>
                            <div class="col-xs-1 col-sm-3 text-center  pl-0 pr-0 data-wrap-right">
                                <svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 91.28 96" class="h-12 py-1 m-auto">
                                  <path fill="#718096" d="M68.43,2H31.57a4.4,4.4,0,0,0-4.39,4.39V18.3H8.75a4.4,4.4,0,0,0-4.39,4.39V93.61A4.4,4.4,0,0,0,8.75,98h82.5a4.4,4.4,0,0,0,4.39-4.39V39a4.4,4.4,0,0,0-4.39-4.39H72.82V6.39A4.4,4.4,0,0,0,68.43,2ZM23.92,84.49a2.27,2.27,0,0,1-2.27,2.27H16.41a2.27,2.27,0,0,1-2.27-2.27V79.25A2.26,2.26,0,0,1,16.41,77h5.24a2.27,2.27,0,0,1,2.27,2.27Zm0-16.3a2.27,2.27,0,0,1-2.27,2.27H16.41a2.27,2.27,0,0,1-2.27-2.27V63a2.27,2.27,0,0,1,2.27-2.27h5.24A2.27,2.27,0,0,1,23.92,63h0Zm0-16.3a2.27,2.27,0,0,1-2.27,2.27H16.41a2.27,2.27,0,0,1-2.27-2.27h0V46.65a2.27,2.27,0,0,1,2.27-2.27h5.24a2.27,2.27,0,0,1,2.27,2.27h0Zm0-16.3a2.27,2.27,0,0,1-2.27,2.27H16.41a2.27,2.27,0,0,1-2.27-2.27h0V30.35a2.27,2.27,0,0,1,2.27-2.27h5.24a2.27,2.27,0,0,1,2.27,2.27h0Zm22.82,48.9a2.27,2.27,0,0,1-2.27,2.27H39.23A2.27,2.27,0,0,1,37,84.49V79.25A2.27,2.27,0,0,1,39.23,77h5.24a2.27,2.27,0,0,1,2.27,2.27Zm0-16.3a2.27,2.27,0,0,1-2.27,2.27H39.23A2.27,2.27,0,0,1,37,68.19V63a2.27,2.27,0,0,1,2.27-2.27h5.24A2.27,2.27,0,0,1,46.78,63h0Zm0-16a2.27,2.27,0,0,1-2.27,2.27H39.23A2.26,2.26,0,0,1,37,52.17V46.93a2.27,2.27,0,0,1,2.27-2.27h5.24a2.27,2.27,0,0,1,2.27,2.27h0ZM51.81,36.7H48.19a2,2,0,0,1-2-2V28.34H39.83a2,2,0,0,1-2-2V22.67a2,2,0,0,1,2-2h6.31V14.31a2,2,0,0,1,2-2h3.62a2,2,0,0,1,2,2v6.31h6.31a2,2,0,0,1,2,2v3.62a2,2,0,0,1-2,2H53.86v6.31A2,2,0,0,1,52,36.7ZM63,84.49a2.27,2.27,0,0,1-2.27,2.27h-5.2a2.27,2.27,0,0,1-2.27-2.27V79.25A2.26,2.26,0,0,1,55.53,77h5.24A2.27,2.27,0,0,1,63,79.25Zm0-16.3a2.27,2.27,0,0,1-2.27,2.27h-5.2a2.27,2.27,0,0,1-2.27-2.27V63a2.27,2.27,0,0,1,2.27-2.27h5.24A2.27,2.27,0,0,1,63,63Zm0-16a2.27,2.27,0,0,1-2.27,2.27h-5.2a2.27,2.27,0,0,1-2.27-2.27h0V46.93a2.27,2.27,0,0,1,2.27-2.27h5.24A2.27,2.27,0,0,1,63,46.93Zm13-5.53a2.27,2.27,0,0,1,2.27-2.27h5.24a2.27,2.27,0,0,1,2.27,2.27V51.9a2.27,2.27,0,0,1-2.27,2.27H78.35a2.27,2.27,0,0,1-2.27-2.27ZM76,63a2.27,2.27,0,0,1,2.27-2.27h5.24A2.27,2.27,0,0,1,85.78,63V68.2a2.27,2.27,0,0,1-2.27,2.27H78.35a2.27,2.27,0,0,1-2.27-2.27Zm0,16.3A2.26,2.26,0,0,1,78.28,77h5.31a2.27,2.27,0,0,1,2.27,2.27v5.24a2.27,2.27,0,0,1-2.27,2.27H78.35a2.27,2.27,0,0,1-2.27-2.27Z" transform="translate(-4.36 -2)"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default card-view pa-0">
        <div class="panel-wrapper collapse in">

            <div class="panel-body pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row ">

                            <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left ">
                                <span class="txt-dark block counter"><span
                                        class="counter-anim text-danger">{{country.total.deaths}}</span></span>
                                <span class="weight-500 capitalize-font block font-13">Total Death
                                    Cases</span>
                            </div>
                            <div class="col-xs-1 col-sm-3 text-center  pl-0 pr-0 data-wrap-right">
                                <svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 32" class="h-12 py-1 m-auto">
                                  <path fill="#c53030" d="M46.54,24.69H2.91V9.45A1.46,1.46,0,0,0,0,9.45v29.1a1.46,1.46,0,0,0,2.91,0V33.32H45.09v5.23a1.46,1.46,0,0,0,2.91,0V26.15A1.46,1.46,0,0,0,46.54,24.69Z" transform="translate(0 -8)"></path>
                                  <path fill="#c53030" d="M6.44,23.68h8.8a2.43,2.43,0,0,0,2.43-2.43v-1a2.43,2.43,0,0,0-2.43-2.42H6.44A2.43,2.43,0,0,0,4,20.22v1A2.43,2.43,0,0,0,6.44,23.68Z" transform="translate(0 -8)"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default card-view pa-0">
        <div class="panel-wrapper collapse in">
            <div class="panel-body pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
                                <span class="txt-dark block counter"><span
                                        class="counter-anim text-success">{{country.total.recovered}}</span></span>
                                <span class="weight-500 capitalize-font font-13 block">Total Recovery
                                    Cases</span>
                            </div>
                            <div class="col-xs-1 col-sm-3 text-center  pl-0 pr-0 data-wrap-right">
                                <svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88.29 81.35" class="h-12 py-1 m-auto">
                                  <path fill="#276749" d="M72.31,9.32c-12.4,0-19.9,8.3-22.4,11.06C47.4,18,37.24,9.43,27.54,9.43c-10.66,0-21.69,8.93-21.69,23.88C5.85,48,21.17,62,32.36,72.3L50,90.68,67.56,72.41C78.78,62.12,94.14,48,94.14,33.31,94.14,19,85.37,9.32,72.31,9.32Zm-4,47.5H57v11H42.62v-11h-11V42.44h11V31.14H57v11.3H68.3V56.82Z" transform="translate(-5.85 -9.32)"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default card-view pa-0">
        <div class="panel-wrapper collapse in">

            <div class="panel-body pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row ">

                            <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left ">
                                <span class="txt-dark block counter"><span
                                        class="counter-anim text-danger">{{ mortality_rate }}</span></span>
                                <span class="weight-500 capitalize-font block font-13">Mortality rate</span>
                            </div>
                            <div class="col-xs-1 col-sm-3 text-center  pl-0 pr-0 data-wrap-right">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 95.07 89.2" class="h-12 py-1 m-auto">
                                  <g id="Ebene_1" data-name="Ebene 1">
                                    <path fill="#c05621" d="M96.1,77.3,60.2,11.5A11.59,11.59,0,0,0,49.9,5.4h0a11.59,11.59,0,0,0-10.3,6.1L3.9,77.3a11.71,11.71,0,0,0,.2,11.6,11.54,11.54,0,0,0,10.1,5.7H85.7A11.76,11.76,0,0,0,96.1,77.3ZM45.6,34.5a5.91,5.91,0,0,1,4.3-1.9,5.8,5.8,0,0,1,5.8,5.8v.8l-3,24a8.63,8.63,0,0,0-2.8-.4,8,8,0,0,0-2.7.4l-3-24A6.44,6.44,0,0,1,45.6,34.5Zm4.3,44.6a5.8,5.8,0,1,1,5.8-5.8A5.68,5.68,0,0,1,49.9,79.1Z" transform="translate(-2.46 -5.4)"></path>
                                  </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default card-view pa-0">
        <div class="panel-wrapper collapse in">

            <div class="panel-body pa-0">
                <div class="sm-data-box">
                    <div class="container-fluid">
                        <div class="row ">
                            <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left ">
                                <span class="txt-dark block counter"><span
                                        class="counter-anim text-success">{{ recovery_rate }}</span></span>
                                <span class="weight-500 capitalize-font block font-13">Recovery rate</span>
                            </div>
                            <div class="col-xs-6 text-center  pl-0 pr-0 data-wrap-right">
                                <i class="icon-control-rewind data-right-rep-icon txt-light-grey"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>



<div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
    <div class=" panel panel-default card-view">
        <div class="panel-heading text-center">
            <div class="pull-left">
                <h6 class="panel-title txt-dark">Moroccan Region Map</h6>
            </div>



            <span id="typed" style="font-weight: 500;font-size:17px;display: inline;"></span>

            <div class=" pull-right">

                <a href="#" class="pull-left inline-block full-screen">
                    <i class="zmdi zmdi-fullscreen"></i>
                </a>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="panel-wrapper collapse in">
            <div class="panel-body">
                <ul class="flex-stat mb-10 ml-15">
                    <li class="text-left auto-width mr-60">
                        <span class="block">Today's Number of Cases</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.confirmed}}</span></span>


                        {% if country.increment.confirmed >= 0 %}
                        <span class=" txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.confirmed}}%</span>
                        </span>

                        {% else %}
                        <span class=" txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.confirmed}}%</span>
                        </span>
                        {% endif %}
                        <div class="clearfix"></div>
                    </li>
                    <li class="text-left auto-width mr-60">
                        <span class="block">Today's Number of deaths</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.deaths}}</span></span>


                        {% if country.increment.deaths >= 0 %}
                        <span class="txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.deaths}}%</span>
                        </span>
                        {% else %}
                        <span class="txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.deaths}}%</span>
                        </span>
                        {% endif %}


                        <div class="clearfix"></div>
                    </li>

                    <li class="text-left auto-width">
                        <span class="block">Today's Number of Recovered</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.recovered}}</span></span>


                        {% if country.increment.recovered >= 0 %}
                        <span class=" txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.recovered}}%</span>
                        </span>
                        {% else %}
                        <span class=" txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.recovered}}%</span>
                        </span>
                        {% endif %}



                        <div class="clearfix"></div>
                    </li>
                </ul>


                <div width="400" height="200">{{ iframe|safe }}</div>

            </div>
        </div>
    </div>
</div>

<div class="col-lg-9 col-md-6 col-sm-12 col-xs-12">
    <div class=" panel panel-default card-view">
        <div class="panel-heading text-center">
            <div class="pull-left">
                <h6 class="panel-title txt-dark">Increment Graph</h6>
            </div>



            <span id="typed" style="font-weight: 500;font-size:17px;display: inline;"></span>

            <div class=" pull-right">

                <a href="#" class="pull-left inline-block full-screen">
                    <i class="zmdi zmdi-fullscreen"></i>
                </a>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="panel-wrapper collapse in">
            <div class="panel-body">
                <ul class="flex-stat mb-10 ml-15">
                    <li class="text-left auto-width mr-60">
                        <span class="block">Today's Number of Cases</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.confirmed}}</span></span>


                        {% if country.increment.confirmed >= 0 %}
                        <span class=" txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.confirmed}}%</span>
                        </span>

                        {% else %}
                        <span class=" txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.confirmed}}%</span>
                        </span>
                        {% endif %}
                        <div class="clearfix"></div>
                    </li>
                    <li class="text-left auto-width mr-60">
                        <span class="block">Today's Number of deaths</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.deaths}}</span></span>


                        {% if country.increment.deaths >= 0 %}
                        <span class="txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.deaths}}%</span>
                        </span>
                        {% else %}
                        <span class="txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.deaths}}%</span>
                        </span>
                        {% endif %}


                        <div class="clearfix"></div>
                    </li>

                    <li class="text-left auto-width">
                        <span class="block">Today's Number of Recovered</span>
                        <span class=" txt-dark weight-500 font-18"><span
                                class="counter-anim">{{country.today.recovered}}</span></span>


                        {% if country.increment.recovered >= 0 %}
                        <span class=" txt-success mt-5">
                            <i class="zmdi zmdi-caret-up pr-5 font-20"></i><span
                                class="weight-500">+{{country.increment.recovered}}%</span>
                        </span>
                        {% else %}
                        <span class=" txt-danger mt-5">
                            <i class="zmdi zmdi-caret-down pr-5 font-20"></i><span
                                class="weight-500">{{country.increment.recovered}}%</span>
                        </span>
                        {% endif %}



                        <div class="clearfix"></div>
                    </li>
                </ul>


                <canvas id="myChart" width="400" height="200"></canvas>

            </div>
        </div>
    </div>
</div>

</div>

</div>

<div class="container-fluid">

    <!-- Table -->
    <div class="row heading-bg">
        <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
            <h5 class="txt-dark">Export</h5>
        </div>
    </div>


    <!-- Row -->
    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-default card-view">
                <div class="panel-wrapper collapse in">
                    <div class="panel-body">
                        <div class="table-wrap">
                            <div class="table-responsive">
                                <table id="example" class="table table-hover display  pb-30">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Number of Cases</th>
                                            <th>Number of Deaths</th>
                                            <th>Number of Recovered</th>


                                        </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th>Date</th>
                                            <th>Number of Cases</th>
                                            <th>Number of Deaths</th>
                                            <th>Number of Recovered</th>


                                        </tr>
                                    </tfoot>
                                    <tbody>

                                        {% for i in country.timeline%}
                                        <tr>
                                            <td>{{i.date|date:"SHORT_DATE_FORMAT"}}</td>
                                            <td>{{i.confirmed}}</td>
                                            <td>{{i.deaths}}</td>
                                            <td>{{i.recovered}}</td>

                                        </tr>
                                        {% endfor %}

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer container-fluid pl-30 pr-30">
    <div class="row">
        <div class="col-sm-12">
            <p>2020 &copy; Mohamed EL KHATIRI</p>
        </div>
    </div>
</footer>
<!-- /Footer -->

{% endblock content %}


{% block js %}
<script>
    var date = [];
    var deaths = [];
    var confirmed = [];
    var recovered = [];

    '{%for i in country.timeline%}'
    date.push("{{i.date|date:'j F Y'}}");
    deaths.push(parseInt('{{i.deaths}}'));
    confirmed.push(parseInt('{{i.confirmed}}'))
    recovered.push(parseInt('{{i.recovered}}'))
    '{% endfor %}'

	var ctx = document.getElementById('myChart').getContext('2d');
	var myChart = new Chart(ctx, {
		type: 'line',
		data: {

			labels: date.reverse(),
			datasets: [
				{
					label: 'Number of deaths',
					data: deaths.reverse(),
					backgroundColor: "#ffe0ac",
                    borderWidth: 1,
                    fill:true


                },
                {
					label: 'Number of recovered',
					data: recovered.reverse(),
					backgroundColor: "#6886c5",

                    borderWidth: 1,
                    fill:true


                },
                {
					label: 'Number of cases',
					data: confirmed.reverse(),
                    backgroundColor: "#ffacb7",
                    borderWidth: 1,
                    fill:true
				},
			]
		},
		options: {
            tooltips: {
      mode: 'index',
      intersect: true
    },
			scales: {
				yAxes: [{
					ticks: {
						beginAtZero: true
					}
				}]
            }

		}
    });

$(document).ready(function () {
			setTimeout(300)
			var options = {
				strings: ['  For your Health', 'for the people you love', 'for your country',
					"There's something you can do^3000 ",
					'Stay Home!^5000'

				],

				typeSpeed: 40,
				backSpeed: 50,
				smartBackspace: true,
				startDelay: 7000,
				// loop: true,
				// loopCount: 2,
				onComplete: function (self) {
					self.cursor.remove()
				}


			};

			var typed = new Typed('#typed', options)



		});
    </script>
{% endblock js %}
